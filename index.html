<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Granicer Ceramica - Price List Generator</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100dvh; /* Mobile/iOS compatibility */
            max-height: 100dvh; 
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #ddd;
            flex-shrink: 0;
        }

        .tab-btn {
            flex: 1;
            padding: 15px 10px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            color: #ed3237;
            background: white;
            border-bottom-color: #ed3237;
        }

        .tab-btn:hover {
            color: #ed3237;
        }

        .tab-content {
            display: none;
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        .form-group {
            margin-bottom: 15px;
            flex-shrink: 0;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 0.95em;
        }

        input[type='text'],
        input[type='number'],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        input[type='text']:focus,
        input[type='number']:focus,
        select:focus {
            outline: none;
            border-color: #ed3237;
            box-shadow: 0 0 0 3px rgba(237, 50, 55, 0.1);
        }

        .price-input-container {
            display: flex;
            align-items: center;
            border: 2px solid #ddd;
            border-radius: 8px;
            transition: border-color 0.3s;
            overflow: hidden;
        }

        .price-input-container:focus-within {
            border-color: #ed3237;
            box-shadow: 0 0 0 3px rgba(237, 50, 55, 0.1);
        }

        .price-symbol {
            padding: 12px 12px;
            background: #f8f9fa;
            color: #666;
            font-weight: 600;
            font-size: 1.1em;
            border-right: 2px solid #ddd;
            flex-shrink: 0;
        }

        .price-input-container input {
            flex: 1;
            border: none;
            padding: 12px;
            font-size: 1em;
            outline: none;
            background: white;
        }

        .price-input-container input:focus {
            outline: none;
            box-shadow: none;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-shrink: 0;
            margin-top: 5px;
        }

        .add-button,
        .pdf-button {
            flex: 1;
            padding: 12px;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-button {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .add-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(40, 167, 69, 0.4);
        }

        .pdf-button {
            background: linear-gradient(135deg, #ed3237 0%, #b82329 100%);
        }

        .pdf-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(237, 50, 55, 0.4);
        }

        .pdf-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #ddd;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 150px;
            overflow-y: auto;
            z-index: 100;
            display: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .suggestions.show {
            display: block;
        }

        .suggestion-item {
            padding: 10px 12px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid #f0f0f0;
            font-size: 0.9em;
        }

        .suggestion-item:hover,
        .suggestion-item.suggestion-active {
            background: #f0f0f0;
        }

        .input-wrapper {
            position: relative;
        }

        .items-table {
            margin-top: 20px;
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            border-collapse: collapse;
            border-spacing: 0;
            table-layout: fixed;
        }

        .items-table h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1em;
            flex-shrink: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            font-size: 0.9em;
        }

        thead {
            background: linear-gradient(135deg, #ed3237 0%, #b82329 100%);
            color: white;
            flex-shrink: 0;
        }

        th {
            padding: 5px;
            text-align: center;
            font-weight: 600;
            border: 1px solid #ed3237;
            height: 30px;
        }

        td {
            padding: 2px 4px !important;
            border: 1px solid #ddd;
            text-align: center;
            height: 20px !important;
            max-height: 20px !important;
            min-height: 20px !important;
            line-height: 1 !important;
            overflow: hidden;
            white-space: nowrap;
            vertical-align: middle !important;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        .delete-btn {
            background: #ff6b6b;
            color: white;
            padding: 6px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
            font-weight: 600;
            white-space: nowrap;
        }

        .delete-btn:hover {
            background: #ff5252;
            transform: scale(1.05);
        }

        .empty-state {
            text-align: center;
            padding: 20px 10px;
            color: #999;
            background: #f8f9fa;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .table-wrapper {
            overflow-x: auto;
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('basic')">Basic</button>
            <button class="tab-btn" onclick="switchTab('advance')">Advance</button>
        </div>

        <div id="basic" class="tab-content active">
            <div style="flex: 0 0 auto;">
                <div class="form-group">
                    <label for="size">Size</label>
                    <div class="input-wrapper">
                        <input
                            type="text"
                            id="size"
                            placeholder="Select or type size"
                            oninput="filterSuggestions('size')"
                            inputmode="numeric" 
                        />
                        <div class="suggestions" id="sizeSuggestions"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="surface">Surface</label>
                    <div class="input-wrapper">
                        <input
                            type="text"
                            id="surface"
                            placeholder="Select or type surface"
                            
                            oninput="this.value = this.value.replace(/[^a-zA-Z\s]/g, ''); filterSuggestions('surface')"
                            
                            title="Please enter only letters and spaces."
                        />
                        <div class="suggestions" id="surfaceSuggestions"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="price">Price</label>
                    <div class="price-input-container">
                        <span class="price-symbol">â‚¹</span>
                        <input
                            type="number"
                            id="price"
                            placeholder="Enter price"
                            min="0"
                            step="0.01"

                            oninput="this.value = this.value.replace(/[eE+\-]/g, '');"
                        />
                    </div>
                </div>

                <div class="button-group">
                    <button class="add-button" onclick="addItem()">Add</button>
                    <button class="pdf-button" onclick="generatePDF()" id="pdfBtn" disabled>
                        Generate PDF
                    </button>
                </div>
            </div>

            <div class="items-table">
                <h3>Added Items</h3>
                <div class="table-wrapper">
                    <div id="itemsContainer"></div>
                </div>
            </div>
        </div>

        <div id="advance" class="tab-content">
            <p style="text-align: center; color: #999; padding: 40px;">
                Advance features coming soon...
            </p>
        </div>
    </div>

    <script>
        // --- (V13 - Bug Fix) ---

        const sizes = [
            '1200x1200x9MM',
            '1200x1790x9MM',
            '1200x1800x9MM',
            '1200x2400x9MM',
            '1200x2800x6MM',
            '1200x3180x15MM',
            '1200x3200x15MM',
            '1600x1600x9MM',
            '1600x3200x6MM',
            '1600x3200x12MM',
            '1620x3240x12MM',
            '790x2980x15MM',
            '800x3000x15MM',
            '800x2400x15MM',
            '1000x3000x5MM',
            '1200x2600x6MM',
            '1200x3000x9MM',
            '800x3200x15MM',
        ];

        const surfaces = [
            'ELEGANCE',
            'REPOSE',
            'ALL SURFACES',
            'OTHER',
            'CARVE TECH',
            'LUMINOUS',
            'GRACE',
            'GRAVEL',
            'SAHARA',
            'SHAPE TECH',
            'CRYSTAL',
            'GAMMA',
            'GALAXY',
        ];

        let items = [];
        let itemIdCounter = 0;
        let activeSuggestionIndex = -1; 

        function filterSuggestions(type) {
            activeSuggestionIndex = -1; 
            
            const inputId = type === 'size' ? 'size' : 'surface';
            const suggestionsId = type === 'size' ? 'sizeSuggestions' : 'surfaceSuggestions';
            const data = type === 'size' ? sizes : surfaces;

            const input = document.getElementById(inputId).value.toUpperCase();
            const suggestionsDiv = document.getElementById(suggestionsId);

            if (!input) {
                suggestionsDiv.classList.remove('show');
                return;
            }

            const filtered = data.filter((item) => item.toUpperCase().includes(input));

            if (filtered.length === 0) {
                suggestionsDiv.classList.remove('show');
                return;
            }

            suggestionsDiv.innerHTML = filtered
                .map(
                    (item) =>
                        `<div class="suggestion-item" onclick="selectSuggestion('${inputId}', '${item}')">${item}</div>`
                )
                .join('');

            suggestionsDiv.classList.add('show');
        }

        function selectSuggestion(inputId, value) {
            activeSuggestionIndex = -1; 
            document.getElementById(inputId).value = value;
            document
                .getElementById(inputId === 'size' ? 'sizeSuggestions' : 'surfaceSuggestions')
                .classList.remove('show');
        }

        function addItem() {
            const size = document.getElementById('size').value.trim();
            const surface = document.getElementById('surface').value.trim();
            const price = document.getElementById('price').value.trim();

            if (!size || !surface || !price) {
                alert('Please fill all fields');
                return;
            }

            const item = {
                id: itemIdCounter++,
                size: size,
                surface: surface,
                price: parseFloat(price),
            };

            items.push(item);
            renderItems();
            clearForm();
        }

        function deleteItem(id) {
            items = items.filter((item) => item.id !== id);
            renderItems();
        }

        function renderItems() {
            const container = document.getElementById('itemsContainer');
            const pdfBtn = document.getElementById('pdfBtn');

            if (items.length === 0) {
                container.innerHTML = '<div class="empty-state">No items added yet</div>';
                pdfBtn.disabled = true;
                return;
            }

            pdfBtn.disabled = false;

            let tableHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>Size</th>
                            <th>Surface</th>
                            <th>Price</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            items.forEach((item) => {
                tableHTML += `
                    <tr>
                        <td>${item.size}</td>
                        <td>${item.surface}</td>
                        <td>â‚¹ ${item.price.toFixed(2)}</td>
                        
                        <td><button class="delete-btn" onclick="deleteItem(${item.id})">Delete</button></td>
                    </tr>
                `;
            });

            tableHTML += '</tbody></table>';
            container.innerHTML = tableHTML;
        }

        // ðŸŒŸðŸŒŸðŸŒŸ [MODIFIED FUNCTION V13 - ERROR FIX] ðŸŒŸðŸŒŸðŸŒŸ
        function generatePDF() {
            
            try {
                if (items.length === 0) {
                    alert('Please add items first');
                    return;
                }
                
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF('p', 'mm', 'a4'); // à¤ªà¤¹à¤²à¥‡ doc à¤•à¥‹ à¤‡à¤¨à¤¿à¤¶à¤¿à¤¯à¤²à¤¾à¤‡à¤œà¤¼ (initialize) à¤•à¤°à¥‡à¤‚

                // ðŸŒŸ [V13 FIX] à¤¯à¤¹ à¤¸à¤¹à¥€ à¤¤à¤°à¥€à¤•à¤¾ à¤¹à¥ˆ à¤šà¥‡à¤• à¤•à¤°à¤¨à¥‡ à¤•à¤¾
                if (typeof doc.autoTable !== 'function') {
                    alert('Error: PDF library (autotable) not found or not loaded correctly!');
                    return;
                }

                // --- ðŸ Base64 à¤ªà¥à¤²à¥‡à¤¸à¤¹à¥‹à¤²à¥à¤¡à¤° ---
                // (V11 à¤¸à¥‡ à¤…à¤¸à¥à¤¥à¤¾à¤¯à¥€ à¤²à¥‹à¤—à¥‹)
                const base64LogoA = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8BQDwAEhQGAhKmMIQAAAABJRU5ErkJggg=='; // à¤¯à¤¹ à¤à¤• à¤²à¤¾à¤² à¤¬à¤¿à¤‚à¤¦à¥ à¤¹à¥ˆ
                const base64LogoGranicer = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkqP5fDwAD/AG48P2I5wAAAABJRU5ErkJggg=='; // à¤¯à¤¹ à¤à¤• à¤¨à¥€à¤²à¤¾ à¤¬à¤¿à¤‚à¤¦à¥ à¤¹à¥ˆ
                // 
                // à¤¬à¤¾à¤¦ à¤®à¥‡à¤‚ à¤‡à¤¨à¥à¤¹à¥‡à¤‚ à¤…à¤ªà¤¨à¥‡ à¤…à¤¸à¤²à¥€ Base64 à¤Ÿà¥‡à¤•à¥à¤¸à¥à¤Ÿ à¤¸à¥‡ à¤¬à¤¦à¤² à¤¦à¥‡à¤‚
                // --- -------------------- ---
                
                const currentDate = new Date().toLocaleDateString('en-GB');

                const head = [['Sr. No.', 'Size', 'Surface Type', 'Price (/sq feet)']];
                const body = items.map((item, index) => [
                    index + 1,
                    item.size,
                    item.surface,
                    `â‚¹ ${item.price.toFixed(2)}`
                ]);

                doc.autoTable({
                    head: head,
                    body: body,
                    startY: 98, 
                    margin: { left: 20, right: 20, top: 30, bottom: 30 }, 
                    
                    styles: {
                        font: 'helvetica', 
                        fontSize: 9,
                        cellPadding: 1.8,
                        overflow: 'linebreak'
                    },
                    headStyles: {
                        fillColor: [237, 50, 55], 
                        textColor: [255, 255, 255], 
                        fontSize: 10,
                        fontStyle: 'bold',
                        halign: 'center'
                    },
                    alternateRowStyles: {
                        fillColor: [248, 249, 250] 
                    },
                    columnStyles: {
                        0: { halign: 'center', cellWidth: 15 }, 
                        1: { cellWidth: 'auto' }, 
                        2: { cellWidth: 'auto' }, 
                        3: { halign: 'right', cellWidth: 30 } 
                    },

                    didDrawPage: function (data) {
                        
                        try {
                            doc.addImage(base64LogoA, 'PNG', 192, 0, 18, 21.5, '', 'NONE', 180);
                            doc.addImage(base64LogoA, 'PNG', 0, 275.2, 18, 21.5);
                        } catch (e) {
                            console.error("Corner logo error:", e.message);
                        }

                        if (data.pageNumber === 1) {
                            try {
                                doc.addImage(base64LogoGranicer, 'PNG', 70, 15, 70, 23.5);
                            } catch (e) {
                                console.error("Granicer logo error:", e.message);
                            }
                            
                            doc.setFontSize(9);
                            doc.setFont('helvetica', 'bold');
                            doc.text('Company Details:', 20, 48);
                            doc.text('Registered Office:', 105, 48);
                            doc.setFont('helvetica', 'normal');
                            doc.text('COMET GRANITO PVT.LTD.', 20, 53);
                            doc.text('C.I. No.: U26914GJ2006PTC049091', 20, 58, { textColor: [100, 100, 100] });
                            doc.text('Survey No. 118, National Highway No. 8-A', 105, 53);
                            doc.text('Tal. Morbi, Nava Jambudiya,', 105, 58);
                            doc.text('GJ 363642, INDIA', 105, 63);

                            doc.setFont('helvetica', 'bold');
                            doc.text('Contact:', 20, 71);
                            doc.text('Unit - 2:', 105, 71);
                            doc.setFont('helvetica', 'normal');
                            doc.text('ðŸ“§ Email: info@granicer.in', 20, 76);
                            doc.text('ðŸŒ Web: www.granicer.in', 20, 81);
                            doc.text('Revenue Survey No. 168 P1 and P2', 105, 76);
                            doc.text('Revenue Survey No. 169 P1 and P6', 105, 81);
                            doc.text('At Ratavirda, Wankaner, Morbi-Guj. -363621', 105, 86);
                            
                            doc.setDrawColor(237, 50, 55); 
                            doc.setLineWidth(0.5);
                            doc.line(20, 90, 190, 90); 
                            doc.line(20, 96, 190, 96); 
                            doc.setFontSize(16);
                            doc.setFont('helvetica', 'bold');
                            doc.text('PRICE LIST', 105, 94.5, { align: 'center' });

                        } else {
                            doc.setDrawColor(237, 50, 55); 
                            doc.setLineWidth(0.5);
                            doc.line(20, 25, 190, 25); 
                            doc.setFontSize(14);
                            doc.setFont('helvetica', 'bold');
                            doc.text('PRICE LIST (Continued)', 105, 22, { align: 'center' });
                            data.settings.startY = 30; 
                        }
                    }
                });

                const pageCount = doc.internal.getNumberOfPages();
                doc.setPage(pageCount); 
                
                let finalY = doc.autoTable.previous.finalY; 
                if (finalY > 230) {
                     doc.addPage();
                     doc.setDrawColor(237, 50, 55); 
                     doc.setLineWidth(0.5);
                     doc.line(20, 25, 190, 25); 
                     doc.setFontSize(14);
                     doc.setFont('helvetica', 'bold');
                     doc.text('PRICE LIST (Continued)', 105, 22, { align: 'center' });
                     try {
                         doc.addImage(base64LogoA, 'PNG', 192, 0, 18, 21.5, '', 'NONE', 180);
                         doc.addImage(base64LogoA, 'PNG', 0, 275.2, 18, 21.5);
                     } catch (e) { console.error("Logo error on new page:", e.message); }
                     
                     finalY = 30; 
                }

                drawFooter(finalY + 10); 
                
                function drawFooter(startY) {
                    doc.setDrawColor(237, 50, 55); 
                    doc.setLineWidth(1);
                    doc.line(20, startY, 190, startY); 
                    
                    startY += 5;
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'bold');
                    doc.text('Terms & Conditions:', 20, startY);
                    
                    startY += 4;
                    doc.setFontSize(8);
                    doc.setFont('helvetica', 'normal');
                    const terms = [
                        'All prices are ex-factory and exclusive of GST unless stated otherwise.',
                        'Prices are subject to change without prior notice depending on market conditions.',
                        'Delivery period will be confirmed after order placement.',
                        'The company is not responsible for delays due to transport or unforeseen events.',
                        'The company is not liable once goods leave the factory.',
                        'GST and any other government levies will be charged extra as applicable at the time of billing.',
                        'No return or replacement will be accepted once goods are sold, except for genuine manufacturing defects verified by the company.',
                        'Placing an order implies acceptance of the above terms & conditions.'
                    ];
                    doc.text(terms, 23, startY, { lineHeightFactor: 1.5, maxWidth: 167 });
                    
                    startY += (terms.length * 8 * 0.5) + 8; 
                    
                    doc.setDrawColor(200, 200, 200); 
                    doc.setLineWidth(0.25);
                    doc.line(20, startY, 190, startY); 
                    
                    startY += 4;
                    doc.setFontSize(7);
                    doc.setTextColor(150, 150, 150); 
                    doc.text('This is an electronically generated price list. For further information, please contact our sales team.', 105, startY, { align: 'center' });
                    startY += 3;
                    doc.text(`Generated on: ${currentDate}`, 105, startY, { align: 'center' });
                    startY += 3;
                    doc.text("GRANICER CERAMICA INDIA - Asia's Largest Porcelain Slabs & Tiles Manufacturer", 105, startY, { align: 'center' });
                }

                // --- PDF à¤•à¥‹ à¤¸à¥‡à¤µ à¤•à¤°à¥‡à¤‚ ---
                doc.save('Granicer_PriceList_' + new Date().toISOString().slice(0, 10) + '.pdf');
            
            } catch (e) {
                alert("PDF à¤¬à¤¨à¤¾à¤¨à¥‡ à¤®à¥‡à¤‚ à¤à¤°à¤° à¤†à¤ˆ: " + e.message);
            }
        }


        function clearForm() {
            document.getElementById('size').value = '';
            document.getElementById('surface').value = '';
            document.getElementById('price').value = '';
            document.getElementById('size').focus();
        }

        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-btn');

            tabs.forEach((tab) => tab.classList.remove('active'));
            buttons.forEach((btn) => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        document.addEventListener('click', function (event) {
            if (!event.target.closest('.input-wrapper')) {
                document.getElementById('sizeSuggestions').classList.remove('show');
                document.getElementById('surfaceSuggestions').classList.remove('show');
                activeSuggestionIndex = -1; 
            }
        });

        renderItems();

        function handleSuggestionKeydown(e, type) {
            const suggestionsId = type ==='size' ? 'sizeSuggestions' : 'surfaceSuggestions';
            const suggestionsDiv = document.getElementById(suggestionsId);
            
            if (!suggestionsDiv.classList.contains('show')) {
                activeSuggestionIndex = -1;
                return;
            }

            const items = suggestionsDiv.querySelectorAll('.suggestion-item');
            if (items.length === 0) {
                activeSuggestionIndex = -1;
                return;
            }

            items.forEach(item => item.classList.remove('suggestion-active'));

            if (e.key === 'ArrowDown') {
                e.preventDefault(); 
                activeSuggestionIndex++;
                if (activeSuggestionIndex >= items.length) {
                    activeSuggestionIndex = 0; 
                }
            } else if (e.key === 'ArrowUp') {
                e.preventDefault(); 
                activeSuggestionIndex--;
                if (activeSuggestionIndex < 0) {
                    activeSuggestionIndex = items.length - 1; 
                }
            } else if (e.key === 'Enter') {
                e.preventDefault(); 
                if (activeSuggestionIndex > -1 && items[activeSuggestionIndex]) {
                    items[activeSuggestionIndex].click(); 
                    activeSuggestionIndex = -1; 
                }
            } else if (e.key === 'Escape') {
                suggestionsDiv.classList.remove('show'); 
                activeSuggestionIndex = -1;
            }

            if (activeSuggestionIndex > -1 && items[activeSuggestionIndex]) {
                items[activeSuggestionIndex].classList.add('suggestion-active');
                items[activeSuggestionIndex].scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest'
                });
            }
        }

        document.getElementById('size').addEventListener('keydown', (e) => handleSuggestionKeydown(e, 'size'));
        document.getElementById('surface').addEventListener('keydown', (e) => handleSuggestionKeydown(e, 'surface'));
    </script>
</body>
</html>
