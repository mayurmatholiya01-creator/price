<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tile Price Manager - PDF Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 15px;
            padding-top: 20px;
        }

        .container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 1200px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #f0f0f0;
            background: #f9f9f9;
        }

        .tab-button {
            flex: 1;
            padding: 14px 16px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            text-align: center;
        }

        .tab-button.active {
            color: #d32f2f;
            border-bottom-color: #d32f2f;
        }

        .content {
            padding: 20px;
            max-height: 85vh;
            overflow-y: auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #333;
            font-size: 13px;
        }

        .input-wrapper {
            position: relative;
        }

        .form-group input {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            -webkit-appearance: none;
            appearance: none;
        }

        .form-group input:focus {
            outline: none;
            border-color: #d32f2f;
            box-shadow: 0 0 0 3px rgba(211, 47, 47, 0.1);
        }

        .price-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .price-symbol {
            position: absolute;
            left: 14px;
            font-weight: 700;
            color: #333;
            font-size: 16px;
            pointer-events: none;
            z-index: 2;
            top: 50%;
            transform: translateY(-50%);
        }

        .price-input {
            width: 100%;
            padding: 12px 14px 12px 36px !important;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            -webkit-appearance: none;
            appearance: none;
            background: white;
            -moz-appearance: textfield;
        }

        .price-input::-webkit-outer-spin-button,
        .price-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 250px;
            overflow-y: auto;
            z-index: 100;
            display: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .suggestions.show {
            display: block;
        }

        .suggestion-item {
            padding: 11px 14px;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 13px;
            color: #333;
            user-select: none;
        }

        .suggestion-item.highlighted {
            background: #f5f5f5;
            color: #d32f2f;
            font-weight: 600;
        }

        .buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-add {
            background: #4caf50;
            color: white;
        }

        .btn-add:active {
            background: #45a049;
        }

        .btn-pdf {
            background: #d32f2f;
            color: white;
        }

        .btn-pdf:active {
            background: #b71c1c;
        }

        .items-section {
            margin-top: 24px;
        }

        .items-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            font-size: 13px;
        }

        .items-table thead {
            background: #d32f2f;
            color: white;
        }

        .items-table th {
            padding: 10px 8px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
        }

        .items-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 12px;
        }

        .btn-delete {
            background: #ef5350;
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            font-weight: 600;
        }

        .empty-state {
            text-align: center;
            padding: 30px 20px;
            color: #999;
            background: #f9f9f9;
            border-radius: 8px;
            font-size: 13px;
        }

        .success-message {
            background: #4caf50;
            color: white;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 16px;
            font-size: 13px;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        /* PDF STYLES */
        @media print {
            body {
                background: white;
                padding: 0;
            }

            .container {
                box-shadow: none;
                border-radius: 0;
                max-width: 100%;
                margin: 0;
            }

            .tabs, .buttons, .items-title, .content .form-group, #itemsContainer::before {
                display: none;
            }

            .content {
                padding: 0;
                max-height: none;
                overflow: visible;
            }
        }

        @page {
            size: A4;
            margin: 0;
            padding: 0;
        }

        @media (max-width: 768px) {
            .buttons {
                grid-template-columns: 1fr;
            }

            .content {
                padding: 16px;
            }
        }

        /* PDF TEMPLATE STYLES */
        .pdf-preview {
            display: none;
        }

        .pdf-preview.show {
            display: block;
        }

        .pdf-page {
            background: white;
            width: 210mm;
            height: 297mm;
            margin: 10px auto;
            padding: 15mm;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            font-size: 10pt;
            font-family: Arial, sans-serif;
            position: relative;
            page-break-after: always;
        }

        .pdf-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            border-bottom: 3px solid #d32f2f;
            padding-bottom: 10px;
            position: relative;
        }

        .pdf-logo-left {
            position: absolute;
            top: 0;
            left: 0;
            width: 80px;
            opacity: 0.1;
        }

        .pdf-logo-center {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }

        .pdf-logo-center img {
            max-height: 50px;
            width: auto;
        }

        .pdf-logo-right {
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            opacity: 0.1;
        }

        .company-title {
            text-align: center;
            font-weight: bold;
            font-size: 14pt;
            letter-spacing: 2px;
        }

        .company-subtitle {
            text-align: center;
            font-size: 9pt;
            color: #666;
            margin-top: 3px;
        }

        .pdf-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 8.5pt;
            line-height: 1.4;
        }

        .info-section h4 {
            font-weight: bold;
            color: #d32f2f;
            margin-bottom: 3px;
            font-size: 9pt;
        }

        .info-section p {
            margin: 2px 0;
            color: #333;
        }

        .price-list-title {
            text-align: center;
            font-weight: bold;
            font-size: 12pt;
            color: #d32f2f;
            margin: 15px 0 10px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pdf-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
            font-size: 8.5pt;
        }

        .pdf-table thead {
            background: #d32f2f;
            color: white;
        }

        .pdf-table th {
            padding: 6px;
            text-align: left;
            font-weight: bold;
            border: 1px solid #999;
            height: 20px;
        }

        .pdf-table td {
            padding: 6px;
            border: 1px solid #ddd;
            height: 20px;
        }

        .pdf-table tbody tr:nth-child(even) {
            background: #f9f9f9;
        }

        .pdf-table tbody tr:nth-child(odd) {
            background: white;
        }

        .pdf-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 10mm 15mm;
            border-top: 2px solid #d32f2f;
            font-size: 7pt;
            color: #666;
            background: white;
        }

        .terms-title {
            font-weight: bold;
            color: #d32f2f;
            font-size: 9pt;
            margin-bottom: 5px;
        }

        .terms-list {
            margin-left: 15px;
            line-height: 1.3;
            font-size: 7pt;
        }

        .terms-list li {
            margin: 3px 0;
            color: #333;
        }

        .footer-text {
            text-align: center;
            margin-top: 5px;
            font-size: 7pt;
            color: #999;
        }

        .pdf-page-content {
            min-height: calc(297mm - 120px);
        }

        @media print {
            .pdf-page {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 15mm;
                box-shadow: none;
                page-break-after: always;
            }

            .pdf-footer {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
            }
        }

        .sr-no {
            text-align: center;
        }

        .price-val {
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="tabs">
            <button class="tab-button active" data-tab="basic">Basic</button>
            <button class="tab-button" data-tab="preview">PDF Preview</button>
        </div>

        <div class="content">
            <!-- BASIC TAB -->
            <div class="tab-content active" id="basic">
                <div class="success-message" id="successMsg">✓ Entry added successfully</div>

                <div class="form-group">
                    <label for="size">Size</label>
                    <div class="input-wrapper">
                        <input type="text" id="size" placeholder="Select or type size" autocomplete="off">
                        <div class="suggestions" id="sizeSuggestions"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="surface">Surface</label>
                    <div class="input-wrapper">
                        <input type="text" id="surface" placeholder="Select or type surface" autocomplete="off">
                        <div class="suggestions" id="surfaceSuggestions"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="price">Price</label>
                    <div class="price-wrapper">
                        <span class="price-symbol">₹</span>
                        <input type="number" id="price" class="price-input" placeholder="Enter price" min="0" step="0.01">
                    </div>
                </div>

                <div class="buttons">
                    <button class="btn btn-add" id="addBtn">Add</button>
                    <button class="btn btn-pdf" id="pdfBtn">Generate PDF</button>
                </div>

                <div class="items-section">
                    <div class="items-title">Added Items</div>
                    <div id="itemsContainer"></div>
                </div>
            </div>

            <!-- PDF PREVIEW TAB -->
            <div class="tab-content" id="preview">
                <div id="pdfContainer"></div>
            </div>
        </div>
    </div>

    <script>
        const sizes = ['1200x1200x9MM', '1200x1790x9MM', '1200x1800x9MM', '1200x2400x9MM', '1200x2800x9MM', '1200x3180x15MM', '1200x3200x15MM', '1600x1600x9MM', '1600x3200x12MM', '1620x3240x12MM', '798x2980x15MM', '800x3000x15MM', '1080x3000x5MM', '1200x3000x9MM', '1200x3200x9MM', '800x3200x15MM'];
        const surfaces = ['ELEGANCE', 'REPOSE', 'CARVE TECH', 'LUMINOUS', 'GRACE', 'GRAVEL', 'SAHARA', 'SHAPE TECH', 'CRYSTAL', 'GAMMA', 'GALAXY'];

        const companyInfo = {
            name: 'COMET GRANITO PVT. LTD',
            cin: 'C.I. No.: U26914GJ2006PTC049091',
            email: 'info@granicer.in',
            web: 'www.granicer.in',
            registeredOffice: {
                title: 'Registered Office:',
                address: ['Survey no. 118, National Highway No. 8-A,', 'Tal. Morbi, Nava Jambudia,', 'GJ 363642, INDIA.']
            },
            unit2: {
                title: 'Unit - 2:',
                address: ['Revenue Survey No. 168 P1 and P2', 'Revenue Survey No. 169 P1 and P6', 'At Ratavirda, Wankaner, Morbi-Guj. -363621']
            }
        };

        const terms = [
            'All prices are ex-factory and exclusive of GST unless stated otherwise.',
            'Prices are subject to change without prior notice depending on market conditions.',
            'Delivery period will be confirmed after order placement.',
            'The company is not responsible for delays due to transport or unforeseen events.',
            'The company is not liable once goods leave the factory.',
            'GST and any other government levies will be charged extra as applicable at the time of billing.',
            'No return or replacement will be accepted once goods are sold, except for genuine manufacturing defects verified by the company.',
            'Placing an order implies acceptance of the above terms & conditions.'
        ];

        let items = [];
        let currentSuggestionIndex = -1;

        // TAB SWITCHING
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                const tabName = button.getAttribute('data-tab');
                document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                button.classList.add('active');
                document.getElementById(tabName).classList.add('active');
            });
        });

        // AUTOCOMPLETE
        function setupAutocomplete(inputId, suggestionsId, dataArray, validationType) {
            const input = document.getElementById(inputId);
            const suggestionsDiv = document.getElementById(suggestionsId);

            input.addEventListener('input', (e) => {
                let value = e.target.value;
                
                if (validationType === 'numeric') {
                    value = value.replace(/[^0-9x]/gi, '');
                    input.value = value;
                } else if (validationType === 'alpha') {
                    value = value.replace(/[^a-zA-Z\s]/g, '').toUpperCase();
                    input.value = value;
                }

                const searchValue = value.toUpperCase().trim();
                if (searchValue.length === 0) {
                    suggestionsDiv.classList.remove('show');
                    return;
                }

                const filtered = dataArray.filter(item => item.toUpperCase().includes(searchValue));
                if (filtered.length === 0) {
                    suggestionsDiv.classList.remove('show');
                    return;
                }

                suggestionsDiv.innerHTML = filtered.map((item, idx) => 
                    `<div class="suggestion-item" data-value="${item}" data-index="${idx}">${item}</div>`
                ).join('');
                suggestionsDiv.classList.add('show');
                currentSuggestionIndex = -1;

                document.querySelectorAll(`#${suggestionsId} .suggestion-item`).forEach(item => {
                    item.addEventListener('click', () => {
                        input.value = item.getAttribute('data-value');
                        suggestionsDiv.classList.remove('show');
                    });
                });
            });

            input.addEventListener('keydown', (e) => {
                const items = document.querySelectorAll(`#${suggestionsId} .suggestion-item`);
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    currentSuggestionIndex = Math.min(currentSuggestionIndex + 1, items.length - 1);
                    updateHighlight(suggestionsId, items);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    currentSuggestionIndex = Math.max(currentSuggestionIndex - 1, -1);
                    updateHighlight(suggestionsId, items);
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    if (currentSuggestionIndex >= 0 && items[currentSuggestionIndex]) {
                        input.value = items[currentSuggestionIndex].getAttribute('data-value');
                        suggestionsDiv.classList.remove('show');
                    }
                }
            });

            document.addEventListener('click', (e) => {
                if (!input.contains(e.target) && !suggestionsDiv.contains(e.target)) {
                    suggestionsDiv.classList.remove('show');
                }
            });
        }

        function updateHighlight(suggestionsId, items) {
            items.forEach((item, idx) => {
                item.classList.remove('highlighted');
                if (idx === currentSuggestionIndex) {
                    item.classList.add('highlighted');
                    item.scrollIntoView({ block: 'nearest' });
                }
            });
        }

        setupAutocomplete('size', 'sizeSuggestions', sizes, 'numeric');
        setupAutocomplete('surface', 'surfaceSuggestions', surfaces, 'alpha');

        // ADD ITEM
        document.getElementById('addBtn').addEventListener('click', () => {
            const size = document.getElementById('size').value.trim();
            const surface = document.getElementById('surface').value.trim().toUpperCase();
            const price = document.getElementById('price').value.trim();

            if (!size || !surface || !price || parseFloat(price) <= 0) {
                alert('Please fill all fields correctly');
                return;
            }

            items.push({
                id: Date.now(),
                size,
                surface,
                price: parseFloat(price)
            });

            renderItems();
            document.getElementById('size').value = '';
            document.getElementById('surface').value = '';
            document.getElementById('price').value = '';
            document.getElementById('size').focus();
        });

        function renderItems() {
            const container = document.getElementById('itemsContainer');
            if (items.length === 0) {
                container.innerHTML = '<div class="empty-state">No items added yet</div>';
                return;
            }

            const tableHTML = `
                <table class="items-table">
                    <thead>
                        <tr>
                            <th>Size</th>
                            <th>Surface</th>
                            <th>Price</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${items.map(item => `
                            <tr>
                                <td>${item.size}</td>
                                <td>${item.surface}</td>
                                <td>₹ ${item.price.toFixed(2)}</td>
                                <td><button class="btn-delete" onclick="deleteItem(${item.id})">Delete</button></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            container.innerHTML = tableHTML;
        }

        window.deleteItem = (id) => {
            items = items.filter(item => item.id !== id);
            renderItems();
        };

        // PDF GENERATION
        document.getElementById('pdfBtn').addEventListener('click', generatePDF);

        function generatePDF() {
            if (items.length === 0) {
                alert('Please add at least one item');
                return;
            }

            const pdfContainer = document.getElementById('pdfContainer');
            const itemsPerPage = 10;
            const totalPages = Math.ceil(items.length / itemsPerPage);
            let pdfHTML = '';

            for (let page = 0; page < totalPages; page++) {
                const startIdx = page * itemsPerPage;
                const endIdx = Math.min(startIdx + itemsPerPage, items.length);
                const pageItems = items.slice(startIdx, endIdx);
                const blankRows = itemsPerPage - pageItems.length;

                pdfHTML += `
                    <div class="pdf-page">
                        <!-- HEADER -->
                        <div class="pdf-header">
                            <div class="pdf-logo-left" style="background: url('https://via.placeholder.com/80'); background-size: contain;"></div>
                            <div class="pdf-logo-center">
                                <div class="company-title">GRANICER</div>
                                <div class="company-subtitle">CERAMICA INDIANA</div>
                            </div>
                            <div class="pdf-logo-right" style="background: url('https://via.placeholder.com/80'); background-size: contain;"></div>
                        </div>

                        <!-- COMPANY INFO -->
                        <div class="pdf-info">
                            <div class="info-section">
                                <h4>Company Details:</h4>
                                <p><strong>${companyInfo.name}</strong></p>
                                <p>${companyInfo.cin}</p>
                                <p><strong>Contact:</strong></p>
                                <p>Email: ${companyInfo.email}</p>
                                <p>Web: ${companyInfo.web}</p>
                            </div>
                            <div class="info-section">
                                <h4>${companyInfo.registeredOffice.title}</h4>
                                ${companyInfo.registeredOffice.address.map(line => `<p>${line}</p>`).join('')}
                                <h4 style="margin-top: 8px;">${companyInfo.unit2.title}</h4>
                                ${companyInfo.unit2.address.map(line => `<p>${line}</p>`).join('')}
                            </div>
                        </div>

                        <!-- PRICE LIST TITLE -->
                        <div class="price-list-title">Price List</div>

                        <!-- TABLE -->
                        <table class="pdf-table">
                            <thead>
                                <tr>
                                    <th class="sr-no" style="width: 8%;">Sr. No.</th>
                                    <th style="width: 32%;">Size</th>
                                    <th style="width: 32%;">Surface Type</th>
                                    <th class="price-val" style="width: 28%;">Price Per Unit</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${pageItems.map((item, idx) => `
                                    <tr>
                                        <td class="sr-no">${startIdx + idx + 1}</td>
                                        <td>${item.size}</td>
                                        <td>${item.surface}</td>
                                        <td class="price-val">₹ ${item.price.toFixed(2)}</td>
                                    </tr>
                                `).join('')}
                                ${Array(blankRows).fill(0).map(() => `
                                    <tr>
                                        <td class="sr-no"></td>
                                        <td></td>
                                        <td></td>
                                        <td class="price-val"></td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>

                        <!-- FOOTER -->
                        <div class="pdf-footer">
                            <div class="terms-title">Terms & Conditions:</div>
                            <ul class="terms-list">
                                ${terms.map(term => `<li>${term}</li>`).join('')}
                            </ul>
                            <div class="footer-text">
                                <p>This is an electronically generated price list. For further information, please contact our sales team.</p>
                                <p>Generated on: ${new Date().toLocaleDateString()}</p>
                                <p><strong>GRANICER CERAMICA INDIA - Asia's Largest Porcelain Slabs & Tiles Manufacturer</strong></p>
                            </div>
                        </div>
                    </div>
                `;
            }

            pdfContainer.innerHTML = pdfHTML;
            
            // SWITCH TO PREVIEW TAB
            document.querySelectorAll('.tab-button')[1].click();

            // TRIGGER PRINT
            setTimeout(() => {
                window.print();
            }, 500);
        }

        renderItems();
    </script>
</body>
</html>
